
| 상황           | 설명                                                         | 보낸이                | 받는이              | 주제                                      | **이름**                     | **내용**                                                                                                                                                                                                                                                                                                                     | 종류      | 응답      |
| ------------ | ---------------------------------------------------------- | ------------------ | ---------------- | --------------------------------------- | -------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------- | ------- |
| Escort 1     | Kiosk에서 사용자가 에스코팅을 신청함                                     | Admin GUI          | Libo Service     | 임무 요청                                   | TaskRequest.srv            | # Request<br><br>- string robot_id :<br>    <br>- string task_type : escort<br>    <br>- string call_location : A5<br>    <br>- string goal_location : D3<br>    <br><br>---<br><br># Response<br><br>- bool success : True<br>    <br>- string message : None                                                             | srv     | yes     |
| Escort 1     | 메인 서버에서 경로생성을 하고 로봇에게 경로를 송신                               | Libo Service       | Navigator        | 목적지 주행 요청                               | SetGoal.srv                | # 요청 (Request)<br><br>float64 x<br><br>float64 y<br><br>---<br><br># 응답 (Response)<br><br>bool success<br><br>string message                                                                                                                                                                                               | srv     | yes     |
| Escort 1     | 메인 서버에서 진행중인 네비게이션 취소                                      | Libo Service       | Navigator        | 주행 취소 요청                                | CancelNavigation.srv       | # 요청 (Request) - 비어있어도 됩니다<br><br>---<br><br># 응답 (Response)<br><br>bool success<br><br>string message                                                                                                                                                                                                                     | srv     | yes     |
| Escort 1     | 로봇이 키오스크 앞에 도달                                             | Navigator          | Libo Service     | 목적지 주행 결과 전송                            | NavigationResult.srv       | # 요청 (Request)<br><br>string result # 예: "SUCCEEDED", "FAILED", "CANCELED"<br><br>---<br><br># 응답 (Response)<br><br>bool success<br><br>string message                                                                                                                                                                     | srv     | yes     |
| Escort 1     | 로봇이 키오스크에 도착하고 안내 음성 전달해야 하는 상황                            | Libo Service       | Talker Manager   | 안내 음성 송출요청                              | VoiceCommand.msg           | - string robot_id : libo_a, libo_b<br>    <br>- string category : “escort”, “delivery”, etc<br>    <br>- string action : “arrived”, “return”<br>    <br><br>**(상세정보는 맨 아래 테이블 참고)**                                                                                                                                        | msg     | no      |
| Escort 2     | 책 위치로 이동하기에 앞서 손님 감지가 필요한 상황                               | Libo Service       | Vision Manager   | 손님 인식/감지 기능 활성화 요청                      | ActivateDetector.srv       | # Request<br><br>- string robot_id : libo_a<br>    <br><br>---<br><br># Response<br><br>- bool success : True<br>    <br>- string message : None                                                                                                                                                                           | srv     | yes     |
| ~~Escort 2~~ | ~~손님이 10초 이상 감지가 안된 상황~~                                   | ~~Vision Manager~~ | ~~Libo Service~~ | ~~감지 실패 알림 (10초)~~                      | ~~DetectionFailTimer.msg~~ | - ~~string robot_id : libo_a~~<br>    <br>- ~~int16 count : 10~~                                                                                                                                                                                                                                                           | ~~msg~~ | ~~no~~  |
| ~~Escort 2~~ | ~~손님이 30초 이상 감지가 안된 상황~~                                   | ~~Vision Manager~~ | ~~Libo Service~~ | ~~감지 실패 알림 (30초)~~                      | ~~DetectionFailTimer.msg~~ | - ~~string robot_id : libo_a~~<br>    <br>- ~~int16 count : 30~~                                                                                                                                                                                                                                                           | ~~msg~~ | ~~no~~  |
| Escort 2     | 손님이 30초 이상 감지가 안된 상황                                       | Vision Manager     | Libo Service     | 감지 실패 알림 (30초)                          | DetectionTimer.msg         | - string robot_id : libo_a<br>    <br>- string command : 1~9999                                                                                                                                                                                                                                                            | msg     | no      |
| Escort 2     | timeout에 의한 에스코트 중간 취소                                     | Libo Service       | Vision Manager   | 손님 인식/감지 기능 비활성화 요청                     | DeactivateDetector.srv     | # Request<br><br>- string robot_id : libo_a<br>    <br><br>---<br><br># Response<br><br>- bool success : True<br>    <br>- string message : None                                                                                                                                                                           | srv     | no      |
| Assist 1     | 로봇이 키오스크에 도착하여 관리자의 QR 을 기다리는 상황                           | Libo Service       | Vision Manager   | QR 스캔 기능 활성화                            | ActivateQRScanner.srv      | # Request<br><br>- string robot_id : libo_a<br>    <br><br>---<br><br># Response<br><br>- bool success : True<br>    <br>- string message : None                                                                                                                                                                           | srv     | yes     |
| ~~Assist 1~~ | ~~QR 인증이 성공한 상황~~                                          | ~~Vision Manager~~ | ~~Libo Service~~ | ~~QR 인증 성공 알림~~                         | ~~QRScanResult~~           | ~~# Request~~<br><br>- ~~string robot_id : libo_a~~<br>    <br>- ~~string result : “success”, “fail”~~<br>    <br><br>~~---~~<br><br>~~# Response~~<br><br>- ~~bool success : True~~<br>    <br>- ~~string message : None~~                                                                                                | ~~srv~~ | ~~yes~~ |
| Assist 1     | QR 인증 요청 및 응답                                              | Vision Manager     | Libo Service     | QR 인증 신원 확인 및 결과 확인 (로봇으로 부터 온 이미지속 QR) | RobotQRCheck               | # Request<br><br>- string robot_id : libo_a<br>    <br>- string admin_name : “김민수”<br>    <br><br>---<br><br># Response<br><br>- bool success : True<br>    <br>- string message : None                                                                                                                                    | srv     | yes     |
| Assist 1     | QR 인증 요청 및 응답                                              | Kiosk GUI          | Libo Service     | QR 인증 신원 확인 및 결과 확인 (키오스크로부터 온 이미지속 QR) | KioskQRCheck               | # Request<br><br>- string kiosk_id : kiosk_1<br>    <br>- string admin_name : “김민수”<br>    <br><br>---<br><br># Response<br><br>- bool success : True<br>    <br>- string message : None                                                                                                                                   | srv     | yes     |
| Assist 1     | ​QR 인증이 완료되어 QR 스캔 기능 비활성화 해야하는 상황                         | Libo Service       | Vision Manager   | QR 스캔 기능 비활성화                           | DeactivateQRScanner.srv    | # Request<br><br>- string robot_id : libo_a<br>    <br><br>---<br><br># Response<br><br>- bool success : True<br>    <br>- string message : None                                                                                                                                                                           | srv     | yes     |
| Assist 2     | QR 인증이 성공한 상황                                              | Libo Service       | Talker Manager   | 대화 분석 기능 활성화                            | ActivateTalker.srv         | # Request<br><br>- string robot_id : libo_a<br>    <br><br>---<br><br># Response<br><br>- bool success : True<br>    <br>- string message : None                                                                                                                                                                           | srv     | yes     |
| Assist 2     | QR 인증이 성공한 상황                                              | Libo Service       | Vision Manager   | 트랙킹 기능 활성화                              | ActivateTracker.srv        | # Request<br><br>- string robot_id : libo_a<br>    <br><br>---<br><br># Response<br><br>- bool success : True<br>    <br>- string message : None                                                                                                                                                                           | srv     | yes     |
| Assist 2     | "리보야 종료해"를 외친 상황                                           | Talker Manager     | Libo Service     | 음성 명령 전달(종료)                            | EndTask.srv                | # Request<br><br>- string robot_id : libo_a<br>    <br><br>---<br><br># Response<br><br>- bool success : True<br>    <br>- string message : None                                                                                                                                                                           | srv     | yes     |
| Assist 2     | 종료가 된 상황                                                   | Libo Service       | Talker Manager   | 대화 분석 비활성화 요청                           | DeactivateTalker.srv       | # Request<br><br>- string robot_id : libo_a<br>    <br><br>---<br><br># Response<br><br>- bool success : True<br>    <br>- string message : None                                                                                                                                                                           | srv     | yes     |
| Assist 2     | 종료가 된 상황 (재고려)                                             | Libo Service       | Vision Manager   | 트래킹 기능 비활성화                             | DeactivateTracker.srv      | # Request<br><br>- string robot_id : libo_a<br>    <br><br>---<br><br># Response<br><br>- bool success : True<br>    <br>- string message : None                                                                                                                                                                           | srv     | yes     |
| Delivery 1   | 관리자가 Admin PC 에서 로봇에게 delivery 명령을 내림                      | Admin GUI          | Libo Service     | 임무 요청 (robot_id)                        | TaskRequest.srv            | # Request<br><br>- robot_id : libo_a<br>    <br>- task_type : delivery<br>    <br>- call_location : admin_pc<br>    <br>- goal_location :<br>    <br><br>---<br><br># Response<br><br>- bool success : True<br>    <br>- string message : None                                                                             | srv     | yes     |
| Delivery 1   | 로봇이 도착한 후 관리자가 볼 일을 끝냄. 그 뒤 Admin GUI 를 통해서 다음 목적지를 선택한 상황 | Admin GUI          | Libo Service     | 다음 목적지 추가                               | AddGoalLocation.srv        | # Request<br><br>- string robot_id : libo_a<br>    <br>- string goal_location : F2<br>    <br><br>---<br><br># Response<br><br>- bool success : True<br>    <br>- string message : None                                                                                                                                    | srv     | yes     |
| 평상시          | 로봇이 가동 될 때 heartbeat 계속해서 전달.                              | Libo Operator      | Libo Service     | 생존신고                                    | HeartBeat.msg              | - string sender_id : libo_a, admin_b<br>    <br>- time timestamp : 173…                                                                                                                                                                                                                                                    | msg     | no      |
| 평상시          | 로봇이 현재 적재하고 있는 도서의 무게를 실시간으로 전달                            | Hardware Handler   | Libo Service     | 책 무게                                    | Weight.msg                 | - string robot_id<br>    <br>- float64 weight : 21.3 , 2200.42                                                                                                                                                                                                                                                             | msg     | no      |
| 평상시          | Admin GUI 에 로봇의 현재 상태들을 볼 수 있도록 수시로 상태 공유                  | Libo Service       | Admin GUI        | 모니터링용 로봇 상태 정보들<br><br>(db 저장 - 매 10초)  | OverallStatus.msg          | - string robot_id : libo_a<br>    <br>- bool available : true / false<br>    <br>- int8 battery : 0 ~ 100<br>    <br>- float64 book_weight : 10.4<br>    <br>- float position_x : 3.4<br>    <br>- float position_y : -2.3<br>    <br>- float position_yaw : 140.0                                                         | msg     | no      |
| 임무 수행중       | Admin GUI 에서 각 로봇들의 "임무" 진행 상황을 보기 위해 메인서버에서 수시로 공유        | Libo Service       | Admin GUI        | 로봇 임무 상황<br><br>(db 저장 - 매 task 1회)     | TaskStatus.msg             | - string robot_id : libo_a,<br>    <br>- string task_type : “escort” , “delivery”<br>    <br>- int8 task_stage: 1, 2, 3<br>    <br>- string call_location : D2, A4<br>    <br>- string goal_location: G2, E3<br>    <br>- time start_time : 1723981023<br>    <br>- time end_time : 1723921323                             | msg     | no      |
| 평상시          | 임무를 수행할때/ 평상시                                              | Libo Service       | Libo GUI         | 얼굴 애니메이션 - Task                         | FaceExpression.msg         | - string robot_id<br>    <br>- string expression_type # 표정 타입 (문자열)<br>    <br><br>  <br># 사용 가능한 표정 타입 (문자열)<br><br>State 기반 유지  <br># "normal" - 평소(초록, 기본상태)  <br># "focused" - 집중 (사람 놓침)  <br># "charging" - 충전 (충전중)  <br># "heavy" - 무거운 표정 (무거울때)<br><br>특별 표정  <br># "happy" - 기쁨 (임무완료)  <br># "sad" - 슬픔 (임무실패) | msg     | no      |
| 평상시          | 어시스트중 로봇 대화 / 딜리버리중 종료를 위한 로봇 대화                           | Talker Manager     | Libo GUI         | 얼굴 애니메이션 - 음성대화중                        | FaceExpression.msg         | - string robot_id<br>    <br>- string expression_type # 표정 타입 (문자열)  <br>    <br><br># 사용 가능 expression_type  <br>State 기반 유지  <br># "listening", "speaking", "normal"                                                                                                                                                     | msg     | no      |
| 임무 수행중       | Kiosk 에서 각 로봇들의 위치를 통해 호출이 언제 완료될지 나타내기 위한 정보              | Libo Service       | Kiosk            | 로봇 임무 상황                                | TaskProgress.msg           | - string robot_id: libo_a<br>    <br>- int8 waypoint_total : 5<br>    <br>- int8 waypoint_left : 3<br>    <br>- int8 time_left : 30                                                                                                                                                                                        | msg     | no      |